<script>
    $(document).ready(function () {
        
        let debounceTimer;

        $('#search').keyup(function() {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(function() {
                getCourse(1);
            }, 500);
        });

        function courseTestList(index, value)
        {
            return `
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="card rounded-4 shadow">
                        <div class="card-header bg-transparent">
                            <div class="row align-items-center">
                                <h6 class="fw-bold p-0"><b>${value.course.title}</b></h6>
                            </div>
                        </div>
                        <div class="card-body pt-0 mx-n3 text-dark">
                            <div class="d-flex gap-2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M6.75 3.75C6.35218 3.75 5.97064 3.90804 5.68934 4.18934C5.40804 4.47064 5.25 4.85218 5.25 5.25V20.25C5.25 20.6478 5.40804 21.0294 5.68934 21.3107C5.97064 21.592 6.35218 21.75 6.75 21.75H17.25C17.6478 21.75 18.0294 21.592 18.3107 21.3107C18.592 21.0294 18.75 20.6478 18.75 20.25V5.25C18.75 4.85218 18.592 4.47064 18.3107 4.18934C18.0294 3.90804 17.6478 3.75 17.25 3.75H15.75V2.25H17.25C18.0456 2.25 18.8087 2.56607 19.3713 3.12868C19.9339 3.69129 20.25 4.45435 20.25 5.25V20.25C20.25 21.0456 19.9339 21.8087 19.3713 22.3713C18.8087 22.9339 18.0456 23.25 17.25 23.25H6.75C5.95435 23.25 5.19129 22.9339 4.62868 22.3713C4.06607 21.8087 3.75 21.0456 3.75 20.25V5.25C3.75 4.45435 4.06607 3.69129 4.62868 3.12868C5.19129 2.56607 5.95435 2.25 6.75 2.25H8.25V3.75H6.75Z"
                                        fill="#0F172A" />
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M9.47484 2.25C9.21259 2.25 9 2.46259 9 2.72484V3.27516C9 3.53741 9.21259 3.75 9.47484 3.75H14.5252C14.7874 3.75 15 3.53741 15 3.27516V2.72484C15 2.46259 14.7874 2.25 14.5252 2.25H9.47484ZM7.5 2.72484C7.5 1.63417 8.38417 0.75 9.47484 0.75H14.5252C15.6158 0.75 16.5 1.63417 16.5 2.72484V3.27516C16.5 4.36583 15.6158 5.25 14.5252 5.25H9.47484C8.38417 5.25 7.5 4.36583 7.5 3.27516V2.72484Z"
                                        fill="#0F172A" />
                                    <path
                                        d="M12.4155 8.54C13.2315 8.54 13.8835 8.764 14.3715 9.212C14.8675 9.66 15.1155 10.272 15.1155 11.048C15.1155 11.856 14.8595 12.464 14.3475 12.872C13.8355 13.28 13.1555 13.484 12.3075 13.484L12.2595 14.432H11.0715L11.0115 12.548H11.4075C12.1835 12.548 12.7755 12.444 13.1835 12.236C13.5995 12.028 13.8075 11.632 13.8075 11.048C13.8075 10.624 13.6835 10.292 13.4355 10.052C13.1955 9.812 12.8595 9.692 12.4275 9.692C11.9955 9.692 11.6555 9.808 11.4075 10.04C11.1595 10.272 11.0355 10.596 11.0355 11.012H9.75148C9.75148 10.532 9.85948 10.104 10.0755 9.728C10.2915 9.352 10.5995 9.06 10.9995 8.852C11.4075 8.644 11.8795 8.54 12.4155 8.54ZM11.6475 17.084C11.3995 17.084 11.1915 17 11.0235 16.832C10.8555 16.664 10.7715 16.456 10.7715 16.208C10.7715 15.96 10.8555 15.752 11.0235 15.584C11.1915 15.416 11.3995 15.332 11.6475 15.332C11.8875 15.332 12.0915 15.416 12.2595 15.584C12.4275 15.752 12.5115 15.96 12.5115 16.208C12.5115 16.456 12.4275 16.664 12.2595 16.832C12.0915 17 11.8875 17.084 11.6475 17.084Z"
                                        fill="black" />
                                </svg>
                                <p>${value.total_question} Soal</p>
                            </div>
                            <div class="d-flex gap-2">
                                <div style="padding-left: 2px">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_2864_9147)">
                                        <path
                                            d="M10.6254 6.875C10.6254 6.70924 10.5596 6.55027 10.4424 6.43306C10.3252 6.31585 10.1662 6.25 10.0004 6.25C9.83468 6.25 9.6757 6.31585 9.55849 6.43306C9.44128 6.55027 9.37544 6.70924 9.37544 6.875V11.0775L7.58919 14.0525C7.50382 14.1947 7.47845 14.365 7.51865 14.526C7.55885 14.6869 7.66134 14.8253 7.80356 14.9106C7.94578 14.996 8.11609 15.0214 8.27702 14.9812C8.43795 14.941 8.57632 14.8385 8.66169 14.6962L10.5367 11.5712C10.5948 11.4742 10.6255 11.3631 10.6254 11.25V6.875Z"
                                            fill="#0F172A" />
                                        <path
                                            d="M8.125 0C7.95924 0 7.80027 0.065848 7.68306 0.183058C7.56585 0.300269 7.5 0.45924 7.5 0.625C7.5 0.79076 7.56585 0.949732 7.68306 1.06694C7.80027 1.18415 7.95924 1.25 8.125 1.25H8.75V2.5875C7.04784 2.83342 5.45588 3.57543 4.17297 4.72084C2.89007 5.86625 1.9731 7.36428 1.53661 9.0278C1.10013 10.6913 1.16348 12.4466 1.71876 14.0743C2.27403 15.702 3.29661 17.1301 4.65875 18.18L3.90625 18.9325C3.78889 19.0497 3.72289 19.2087 3.72278 19.3746C3.72266 19.5404 3.78843 19.6995 3.90563 19.8169C4.02282 19.9342 4.18183 20.0002 4.34768 20.0003C4.51354 20.0005 4.67264 19.9347 4.79 19.8175L5.7225 18.885C7.02877 19.6182 8.50202 20.0022 10 20C11.498 20.0022 12.9712 19.6182 14.2775 18.885L15.21 19.8175C15.3274 19.9347 15.4865 20.0005 15.6523 20.0003C15.8182 20.0002 15.9772 19.9342 16.0944 19.8169C16.2116 19.6995 16.2773 19.5404 16.2772 19.3746C16.2771 19.2087 16.2111 19.0497 16.0938 18.9325L15.3425 18.18C16.7047 17.13 17.7272 15.7018 18.2824 14.074C18.8377 12.4462 18.9009 10.6909 18.4643 9.02732C18.0276 7.36377 17.1105 5.86575 15.8274 4.72042C14.5444 3.57509 12.9523 2.83322 11.25 2.5875V1.25H11.875C12.0408 1.25 12.1997 1.18415 12.3169 1.06694C12.4342 0.949732 12.5 0.79076 12.5 0.625C12.5 0.45924 12.4342 0.300269 12.3169 0.183058C12.1997 0.065848 12.0408 0 11.875 0L8.125 0ZM9.4225 3.7725C9.80694 3.74327 10.1931 3.74327 10.5775 3.7725C12.5108 3.92181 14.3112 4.81412 15.6008 6.26219C16.8905 7.71026 17.5691 9.60155 17.4944 11.5392C17.4197 13.4769 16.5974 15.3103 15.2001 16.6547C13.8028 17.9992 11.9391 18.7502 10 18.7502C8.06091 18.7502 6.19718 17.9992 4.79987 16.6547C3.40256 15.3103 2.58028 13.4769 2.50557 11.5392C2.43086 9.60155 3.10952 7.71026 4.39916 6.26219C5.6888 4.81412 7.48916 3.92181 9.4225 3.7725ZM3.16609e-09 4.375C3.16609e-09 5.31625 0.41625 6.16125 1.075 6.73375C2.03968 4.83369 3.58369 3.28968 5.48375 2.325C5.0661 1.84441 4.51161 1.50287 3.89451 1.34608C3.27741 1.1893 2.62713 1.22476 2.03074 1.44771C1.43434 1.67066 0.920276 2.07047 0.557355 2.59362C0.194433 3.11677 -2.86504e-05 3.73829 3.16609e-09 4.375H3.16609e-09ZM16.875 1.25C15.9338 1.25 15.0887 1.66625 14.5162 2.325C16.4163 3.28968 17.9603 4.83369 18.925 6.73375C19.4056 6.3161 19.7471 5.76161 19.9039 5.14451C20.0607 4.52741 20.0252 3.87713 19.8023 3.28074C19.5793 2.68434 19.1795 2.17028 18.6564 1.80735C18.1332 1.44443 17.5117 1.24997 16.875 1.25Z"
                                            fill="#0F172A" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_2864_9147">
                                            <rect width="20" height="20" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                </div>
                                <p>${value.duration} Menit</p>
                            </div>
                            <a href="/dashboard/teacher/test-detail" class="btn bg-primary text-white w-100">Detail Ujian</a>
                        </div>
                    </div>
                </div>
            `
        }


        function getCourse(page) {
            $.ajax({
                type: "GET",
                url: "{{ config('app.api_url') }}/api/course-teacher?page=" + page,
                headers: {
                    Authorization: 'Bearer ' + "{{ session('hummaclass-token') }}",
                },
                data: {
                    search: $('#search').val()
                },
                dataType: "json",
                success: function(response) {
                    $('#list-course').empty();
                    $.each(response.data.data, function(indexInArray, valueOfElement) {
                        $('#list-course').append(courseTestList(indexInArray, valueOfElement));
                    });
                },
                error: function(xhr) {
                    Swal.fire({
                        title: "Terjadi Kesalahan!",
                        text: xhr.responseJSON.meta.message,
                        icon: "error"
                    });
                }
            });
        }

        getCourse(1);
    });
</script>